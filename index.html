<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë™í•´íŠ¹ìˆ˜êµìœ¡ì§€ì›ì„¼í„° ë¬¼í’ˆê²€ìƒ‰</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/png" href="./icon-v9-192.png" />
    <meta name="theme-color" content="#6366f1" />
    <style>
      /* ----------------------------------------------------
       ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ + ëª¨ë‹¬ ìŠ¤íƒ€ì¼ ì¶”ê°€
    ---------------------------------------------------- */
      :root {
        --bg: #fffbf0; /* Creamy White */
        --card: #ffffff;
        --primary: #a5b4fc; /* Pastel Indigo */
        --text: #4b5563; /* Soft Gray */
        --text-sub: #9ca3af;
        --border: #e5e7eb;
        --input-bg: #ffffff;
        --input-border: #d1d5db;
        --highlight: #fct6c1; /* Pastel Orange/Pink */
        --shadow: rgba(0, 0, 0, 0.03);
      }
      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #2d3748; /* Soft Dark Gray */
          --card: #4a5568;
          --primary: #c7d2fe; /* Lighter Pastel Indigo */
          --text: #f7fafc;
          --text-sub: #cbd5e0;
          --border: #4a5568;
          --input-bg: #2d3748;
          --input-border: #4a5568;
          --highlight: #fbd38d; /* Pastel Yellow/Orange */
          --shadow: rgba(0, 0, 0, 0.15);
        }
      }

      body {
        font-family: "Pretendard", sans-serif;
        background: var(--bg);
        color: var(--text);
        padding: 15px;
        margin: 0;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      .container {
        flex: 1;
      }
      .header {
        background: var(--card);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        margin-bottom: 15px;
        position: relative;
        border: 1px solid var(--border);
        box-shadow: 0 2px 4px var(--shadow);
      }
      .header h3 {
        margin: 0;
        font-size: 1.1rem;
      }

      .admin-btn {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: var(--card);
        border: 1px solid var(--border);
        color: var(--text);
        width: 35px;
        height: 35px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .admin-btn.active {
        background: var(--primary);
        color: #fff;
        border-color: var(--primary);
      }

      .search-section {
        background: var(--card);
        padding: 15px;
        border-radius: 12px;
        margin-bottom: 15px;
        border: 1px solid var(--border);
        box-shadow: 0 2px 4px var(--shadow);
      }
      .search-form {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
      }
      .form-group {
        position: relative;
      }
      .form-group label {
        display: block;
        font-size: 11px;
        color: var(--text-sub);
        margin-bottom: 4px;
        font-weight: 600;
      }

      input {
        width: 100%;
        padding: 10px;
        background: var(--input-bg);
        border: 1px solid var(--input-border);
        border-radius: 6px;
        color: var(--text);
        box-sizing: border-box;
      }
      input:focus {
        outline: 2px solid var(--primary);
        border-color: transparent;
      }
      input[readonly] {
        cursor: pointer;
        background-color: var(--bg);
        opacity: 0.9;
      }

      .dropdown-list {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 6px;
        z-index: 1000;
        display: none;
        box-shadow: 0 4px 10px var(--shadow);
      }
      .dropdown-list.show {
        display: block;
      }
      #itemL {
        max-height: 407px;
        overflow-y: auto;
      }

      .dropdown-item {
        padding: 10px;
        cursor: pointer;
        border-bottom: 1px solid var(--border);
        font-size: 13px;
        color: var(--text);
      }
      .dropdown-item:hover {
        background: var(--bg);
        color: var(--primary);
        font-weight: bold;
      }
      .dropdown-item:last-child {
        border-bottom: none;
      }

      .add-btn {
        background: #10b981;
        color: #fff;
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: none;
        margin-bottom: 15px;
        display: none;
        cursor: pointer;
        font-weight: bold;
      }
      .add-btn.show {
        display: block;
      }

      #results {
        display: grid;
        grid-template-columns: 1fr;
        gap: 12px;
      }

      @media (min-width: 768px) {
        #results {
          grid-template-columns: 1fr 1fr; /* 2ì—´ ë°°ì¹˜ */
        }
      }

      .result-card {
        background: var(--card);
        border-radius: 12px;
        display: flex;
        overflow: hidden;
        border: 1px solid var(--border);
        box-shadow: 0 2px 4px var(--shadow);
        cursor: pointer;
        transition: transform 0.2s;
      }
      .result-card:hover {
        transform: translateY(-2px);
      }

      .img-box {
        width: 100px;
        height: 100px;
        background: #000;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .img-box img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .info-box {
        flex: 1;
        padding: 12px;
      }
      .info-box h3 {
        margin: 0 0 5px 0;
        font-size: 15px;
        color: var(--highlight);
      }
      .info-row {
        font-size: 12px;
        color: var(--text-sub);
        margin-bottom: 3px;
      }
      .info-row b {
        color: var(--text);
        font-weight: 600;
      }

      .pagi-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 20px 0;
        gap: 10px;
      }
      .pagi-select {
        background: var(--input-bg);
        color: var(--text);
        border: 1px solid var(--border);
        padding: 8px;
        border-radius: 6px;
        font-size: 12px;
      }
      .pagi-nums {
        display: flex;
        gap: 4px;
        justify-content: center;
        flex: 1;
      }
      .pagi-btn {
        padding: 6px 12px;
        background: var(--card);
        border: 1px solid var(--border);
        color: var(--text);
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
      }
      .pagi-btn.active {
        background: var(--primary);
        border-color: var(--primary);
        color: #fff;
        font-weight: bold;
      }

      .footer {
        text-align: right;
        padding: 30px 15px 15px;
        font-size: 10px;
        color: var(--text-sub);
        line-height: 1.6;
      }
      .footer b {
        font-weight: 700;
        color: var(--text);
      }

      /* ì…ë ¥/ìˆ˜ì • ëª¨ë‹¬ */
      .modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(2px);
      }
      .modal.show {
        display: flex;
      }
      .modal-content {
        background: var(--card);
        padding: 20px;
        border-radius: 12px;
        width: 90%;
        max-width: 360px;
        max-height: 80vh;
        overflow-y: auto;
        border: 1px solid var(--border);
      }

      /* ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ Wrapper ì¶”ê°€ë¡œ ìˆ˜ì • */
      .detail-modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.85);
        z-index: 3000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
        overflow: auto; /* ì‘ì€ í™”ë©´ ëŒ€ì‘ */
        padding: 20px;
      }
      .detail-modal.show {
        display: flex;
      }
      /* ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ Wrapper - ì„¸ë ¨ëœ ë””ìì¸ ì ìš© */
      .detail-wrapper {
        position: relative;
        width: 100%;
        max-width: 750px;
        margin: auto;
        animation: floatUp 0.3s ease-out;
      }
      @keyframes floatUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .detail-content {
        background: var(--card);
        border-radius: 20px; /* ë” ë‘¥ê¸€ê²Œ */
        width: 100%;
        min-height: 450px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        border: none;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* ê¹Šì´ê° ìˆëŠ” ê·¸ë¦¼ì */
      }

      /* ë‹«ê¸° ë²„íŠ¼: ë” ì„¸ë ¨ë˜ê²Œ */
      .detail-close-btn {
        position: absolute;
        top: -50px;
        right: 0;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        color: #333;
        border: none;
        font-size: 24px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        transition: all 0.2s ease;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        backdrop-filter: blur(4px);
      }
      .detail-close-btn:hover {
        transform: scale(1.1) rotate(90deg);
        background: #fff;
        color: var(--primary);
      }

      @media (min-width: 650px) {
        .detail-content {
          flex-direction: row;
        }
        .detail-img-area {
          width: 55%;
          height: auto;
          min-height: 400px;
        }
        .detail-info-area {
          width: 45%;
          padding: 40px 30px;
          overflow-y: auto;
        }
      }

      /* ì´ë¯¸ì§€ ì˜ì—­: ê²€ì€ìƒ‰ ëŒ€ì‹  ë¶€ë“œëŸ¬ìš´ ë°°ê²½ */
      .detail-img-area {
        width: 100%;
        height: 300px;
        background: #f3f4f6; /* ë°ì€ íšŒìƒ‰ */
        background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0iI2QxZDVEQiI+PGc+PHBhdGggZD0iTTIwIDQwQTIwIDIwIDAgMSAxIDIwIDBhMjAgMjAgMCAwIDEgMCA0MHptMC0zNmMxLjk1NiAwIDMuNzkxLjM0IDUuNDU1Ljk2NmwtLjQzIDEuOTU0QTE0LjAxIDE0LjAxIDAgMCAwIDIwIDZDMTIuMjY4IDYgNiAxMi4yNjggNiAyMHMyLjM0IDcuNzM3IDYuMTcyIDEwLjUzM2wuNTEtMS45MzVBMTQuMDEgMTQuMDEgMCAwIDAgMjAgMzRjNy43MzIgMCAxNC02LjI2OCAxNC0xNFMzMi4yNjggOCAyNCA4em0wIDMyYy02LjM1MSAwLTExLjc4Ni0zLjQ0OS0xNC42ODgtOC42MzhsMi4wNy0uODMyQTExLjk5IDExLjk5IDAgMCAwIDIwIDM2YzYuNjI3IDAgMTItNS4zNzMgMTItMTJzLTUuMzczLTEyLTEyLTEyYy0zLjcwNiAwLTcuMDUgMS42OTktOS4zMDYgNC4zODJsLTEuNjEzLTEuMTk2QTEzLjk3NSAxMy45NzUgMCAwIDEgMjAgNHMxNiA3LjE2MyAxNiAxNmMwIDguODM3LTcuMTYzIDE2LTE2IDE2eiIvPjwvZz48L3N2Zz4='); /* ì€ì€í•œ íŒ¨í„´ */
        background-repeat: no-repeat;
        background-position: center;
        background-size: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }
      /* ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ íŒ¨í„´ ìœ„ë¡œ ë®ìŒ */
      .detail-img-area img {
        width: 100%;
        height: 100%;
        object-fit: contain; /* ì‚¬ì§„ ë¹„ìœ¨ ìœ ì§€ */
        z-index: 2;
        transition: opacity 0.3s;
      }

      .detail-info-area {
        padding: 25px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        background: var(--card);
      }

      /* íƒ€ì´í‹€ ë””ìì¸ */
      .detail-title {
        font-size: 1.6rem;
        color: var(--text);
        margin: 0 0 25px 0;
        font-weight: 800;
        line-height: 1.3;
        letter-spacing: -0.5px;
        border-bottom: 2px solid var(--primary);
        padding-bottom: 15px;
        display: inline-block;
      }

      /* ì •ë³´ í–‰ ë””ìì¸ */
      .detail-row {
        display: flex;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid rgba(0,0,0,0.05); /* ì•„ì£¼ ì—°í•œ ì„  */
        font-size: 15px;
      }
      .detail-row:last-child {
        border-bottom: none;
      }
      
      .detail-label {
        width: 70px;
        color: var(--text-sub);
        font-weight: 600;
        font-size: 0.9em;
        flex-shrink: 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .detail-val {
        color: var(--text);
        font-weight: 500;
        flex: 1;
        line-height: 1.5;
      }
    </style>
  </head>
  <body>
    <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ ì¶”ê°€ -->
    <div id="loadingOverlay" style="position:fixed; inset:0; background:rgba(255,255,255,0.9); z-index:9999; display:flex; flex-direction:column; align-items:center; justify-content:center;">
      <div style="border:4px solid rgba(0,0,0,0.1); width:40px; height:40px; border-radius:50%; border-left-color:var(--primary); animation:spin 1s linear infinite; margin-bottom:15px;"></div>
      <div style="font-weight:bold; color:var(--text);">ìµœì‹  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
      <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
    </div>
    <div class="container">
      <div class="header">
        <h3>ğŸ“ ë™í•´íŠ¹ìˆ˜êµìœ¡ì§€ì›ì„¼í„° ë¬¼í’ˆê²€ìƒ‰</h3>
        <button class="admin-btn" onclick="toggleAdmin()">ğŸ‘¤</button>
      </div>

      <button class="add-btn" id="addBtn" onclick="openModal()">
        â• ìƒˆ í•­ëª© ì¶”ê°€
      </button>

      <div class="search-section">
        <div class="search-form">
          <div class="form-group">
            <label>ì¢…ëª©</label>
            <input
              type="text"
              id="cat"
              placeholder="ì„ íƒí•˜ì„¸ìš”"
              autocomplete="off"
              readonly
            />
            <div class="dropdown-list" id="catL"></div>
          </div>
          <div class="form-group">
            <label>ì˜ì—­</label>
            <input
              type="text"
              id="area"
              placeholder="ì„ íƒí•˜ì„¸ìš”"
              autocomplete="off"
              readonly
            />
            <div class="dropdown-list" id="areaL"></div>
          </div>
          <div class="form-group">
            <label>í’ˆëª…</label>
            <input
              type="text"
              id="item"
              placeholder="ì „ì²´/ì…ë ¥ (ììŒê°€ëŠ¥)"
              autocomplete="off"
            />
            <div class="dropdown-list" id="itemL"></div>
          </div>
          <button
            onclick="
              currentPage = 1;
              performSearch();
            "
            style="
              background: var(--primary);
              color: #fff;
              border: none;
              border-radius: 6px;
              cursor: pointer;
              font-weight: bold;
            "
          >
            ğŸ” ê²€ìƒ‰
          </button>
        </div>
      </div>

      <div id="results"></div>

      <div class="pagi-container" id="pagiBar" style="display: none">
        <select
          class="pagi-select"
          id="pageSize"
          onchange="
            currentPage = 1;
            renderUI();
          "
        >
          <option value="10">10ê°œì”©</option>
          <option value="20">20ê°œì”©</option>
          <option value="50">50ê°œì”©</option>
          <option value="100">100ê°œì”©</option>
        </select>
        <div class="pagi-nums" id="pagiNums"></div>
        <div style="width: 65px"></div>
      </div>
    </div>

    <div class="footer">
      <b>Â© 2025 L.To. ALL RIGHTS RESERVED. POWERED BY L.To</b><br />
      ë°ì´í„°ëŠ” ë™í•´íŠ¹ìˆ˜êµìœ¡ì§€ì›ì„¼í„°ì˜ ìì‚° ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.
    </div>

    <div
      class="detail-modal"
      id="detailModal"
      onclick="if (event.target.id === 'detailModal') closeDetailModal();"
    >
      <div class="detail-wrapper">
        <button class="detail-close-btn" onclick="closeDetailModal()">Ã—</button>
        <div class="detail-content">
            <div class="detail-img-area">
            <img id="dt_img" src="" alt="ë¬¼í’ˆ ì‚¬ì§„" />
            </div>
            <div class="detail-info-area">
            <div class="detail-title" id="dt_name"></div>
            <div class="detail-row">
                <span class="detail-label">ì¢…ëª©</span
                ><span class="detail-val" id="dt_cat"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">ì˜ì—­</span
                ><span class="detail-val" id="dt_area"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">ìˆœë²ˆ</span
                ><span class="detail-val" id="dt_num"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">ìœ„ì¹˜</span
                ><span class="detail-val" id="dt_loc"></span>
            </div>
            <div class="detail-row">
                <span class="detail-label">ìˆ˜ëŸ‰</span
                ><span class="detail-val" id="dt_qty"></span>
            </div>
            </div>
        </div>
      </div>
    </div>

    <div class="modal" id="modal">
      <div class="modal-content">
        <h3 id="mTitle">í•­ëª© ì¶”ê°€</h3>
        <div class="form-group">
          <label>ì¢…ëª©</label><input type="text" id="m_cat" autocomplete="off" />
          <div class="dropdown-list" id="mCatL"></div>
        </div>
        <div class="form-group" style="margin-top: 10px">
          <label>ì˜ì—­</label
          ><input type="text" id="m_area" autocomplete="off" />
          <div class="dropdown-list" id="mAreaL"></div>
        </div>
        <div class="form-group" style="margin-top: 10px">
          <label>ìˆœë²ˆ</label
          ><input
            type="text"
            id="m_num"
            readonly
            style="background: rgba(0, 0, 0, 0.1)"
          />
        </div>
        <div class="form-group" style="margin-top: 10px">
          <label>í’ˆëª…</label><input type="text" id="m_item" />
        </div>
        <div class="form-group" style="margin-top: 10px">
          <label>ìˆ˜ëŸ‰</label><input type="text" id="m_qty" />
        </div>
        <div class="form-group" style="margin-top: 10px">
          <label>ìœ„ì¹˜</label><input type="text" id="m_loc" />
        </div>
        <input type="file" id="f_input" hidden onchange="previewImg(event)" />
        <button
          onclick="document.getElementById('f_input').click()"
          style="
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: #f59e0b;
            border: none;
            border-radius: 6px;
            color: #fff;
            cursor: pointer;
          "
        >
          ğŸ“· ì‚¬ì§„ ì„ íƒ
        </button>
        <img
          id="m_prev"
          style="
            width: 100%;
            display: none;
            border-radius: 6px;
            margin-bottom: 10px;
          "
        />
        <div style="display: flex; gap: 10px">
          <button
            onclick="saveData()"
            style="
              flex: 1;
              padding: 10px;
              background: var(--primary);
              border: none;
              color: #fff;
              border-radius: 6px;
              font-weight: bold;
            "
          >
            ì €ì¥
          </button>
          <button
            onclick="closeModal()"
            style="
              flex: 1;
              background: #444;
              border: none;
              color: #fff;
              border-radius: 6px;
            "
          >
            ì·¨ì†Œ
          </button>
        </div>
      </div>
    </div>

    <!-- PWA & Logic Scripts -->
    <script src="js/data-manager.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
